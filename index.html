<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Fran√ßaisIA - Plateforme d'apprentissage adaptatif avec IA">
    <title>üéì Fran√ßaisIA - Apprentissage Adaptatif</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        :root { --primary: #667eea; --secondary: #764ba2; --success: #11998e; --warning: #f5576c; --info: #4facfe; --dark: #2C3E50; --light: #F8F9FA; }
        body { font-family: 'Segoe UI', sans-serif; background: linear-gradient(135deg, #667eea, #764ba2); min-height: 100vh; padding: 10px; }
        .container { max-width: 1400px; margin: 0 auto; }
        header { background: white; border-radius: 15px; padding: 20px; margin-bottom: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1); display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 15px; }
        .logo { display: flex; align-items: center; gap: 15px; }
        .logo-icon { width: 60px; height: 60px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 2em; }
        .logo-text h1 { font-size: clamp(1.5em, 4vw, 2em); background: linear-gradient(135deg, var(--primary), var(--secondary)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 800; }
        .logo-text p { color: #666; font-size: clamp(0.75em, 2vw, 0.95em); }
        .header-btn { padding: 10px 20px; border-radius: 20px; border: none; cursor: pointer; font-weight: bold; color: white; transition: all 0.3s; }
        .btn-help { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .btn-export { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .btn-reset { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .header-btn:hover { transform: translateY(-2px); }
        .dashboard { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 25px; }
        .stat-card { background: white; border-radius: 15px; padding: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); display: flex; align-items: center; gap: 20px; }
        .stat-icon { width: 60px; height: 60px; border-radius: 15px; display: flex; align-items: center; justify-content: center; font-size: 2em; }
        .stat-icon.primary { background: linear-gradient(135deg, #667eea, #764ba2); }
        .stat-icon.success { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .stat-icon.warning { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .stat-icon.info { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .stat-content h3 { font-size: 2em; color: var(--dark); }
        .stat-content p { color: #666; font-size: 0.9em; }
        .level-card { background: white; border-radius: 15px; padding: 25px; margin-bottom: 25px; box-shadow: 0 5px 20px rgba(0,0,0,0.1); }
        .level-badge { padding: 8px 20px; border-radius: 20px; font-weight: bold; color: white; }
        .level-badge.debutant { background: linear-gradient(135deg, #f093fb, #f5576c); }
        .level-badge.intermediaire { background: linear-gradient(135deg, #4facfe, #00f2fe); }
        .level-badge.avance { background: linear-gradient(135deg, #11998e, #38ef7d); }
        .progress-bar-container { background: #e0e0e0; border-radius: 10px; height: 30px; overflow: hidden; }
        .progress-bar { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 1s; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
        .ai-recommendations { background: linear-gradient(135deg, #667eea, #764ba2); color: white; border-radius: 15px; padding: 25px; margin-bottom: 25px; }
        .ai-suggestion { background: rgba(255,255,255,0.15); padding: 20px; border-radius: 12px; margin-top: 15px; }
        .lessons-section { background: white; border-radius: 15px; padding: 25px; margin-bottom: 25px; }
        .lessons-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; margin-top: 20px; }
        .lesson-card { background: linear-gradient(135deg, #f5f7fa, #c3cfe2); border-radius: 15px; padding: 25px; cursor: pointer; transition: all 0.3s; }
        .lesson-card:hover { transform: translateY(-8px); box-shadow: 0 15px 40px rgba(0,0,0,0.2); }
        .lesson-icon { font-size: 3em; margin-bottom: 15px; }
        .lesson-title { font-size: 1.5em; color: var(--dark); margin-bottom: 10px; font-weight: bold; }
        .lesson-description { color: #666; font-size: 0.95em; margin-bottom: 15px; }
        .lesson-difficulty { padding: 5px 15px; border-radius: 15px; font-size: 0.85em; font-weight: bold; }
        .difficulty-facile { background: #d4edda; color: #155724; }
        .difficulty-moyen { background: #fff3cd; color: #856404; }
        .difficulty-difficile { background: #f8d7da; color: #721c24; }
        .lesson-container { display: none; background: white; border-radius: 15px; padding: 25px; }
        .lesson-container.active { display: block; }
        .back-btn { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; padding: 12px 30px; border-radius: 25px; font-size: 1.1em; cursor: pointer; font-weight: bold; }
        .question-card { background: linear-gradient(135deg, #f5f7fa, #c3cfe2); border-radius: 15px; padding: 30px; margin-bottom: 25px; }
        .question-header { display: flex; align-items: center; gap: 15px; margin-bottom: 25px; flex-wrap: wrap; }
        .question-number { width: 50px; height: 50px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 1.3em; font-weight: bold; }
        .options-grid { display: grid; gap: 15px; }
        .option { background: white; padding: 20px; border-radius: 12px; border: 3px solid #e0e0e0; cursor: pointer; transition: all 0.3s; }
        .option:hover { border-color: var(--primary); }
        .option.correct { background: linear-gradient(135deg, #d4edda, #c3e6cb); border-color: var(--success); }
        .option.wrong { background: linear-gradient(135deg, #f8d7da, #f5c6cb); border-color: var(--warning); }
        .explanation-box { background: linear-gradient(135deg, #e3f2fd, #bbdefb); border-left: 5px solid var(--primary); padding: 20px; border-radius: 12px; margin-top: 20px; display: none; }
        .explanation-box.show { display: block; }
        .btn { padding: 15px 35px; border: none; border-radius: 25px; font-size: 1.1em; font-weight: bold; cursor: pointer; color: white; background: linear-gradient(135deg, var(--primary), var(--secondary)); margin-top: 20px; }
        .performance-report { display: none; text-align: center; padding: 30px; }
        .performance-report.show { display: block; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; padding: 20px; overflow-y: auto; }
        .modal.show { display: flex; align-items: center; justify-content: center; }
        .modal-content { background: white; border-radius: 20px; padding: 30px; max-width: 800px; width: 100%; max-height: 90vh; overflow-y: auto; }
        .close-modal { width: 40px; height: 40px; border-radius: 50%; background: #f5576c; border: none; cursor: pointer; font-size: 1.5em; color: white; float: right; }
        @media (max-width: 768px) { header { flex-direction: column; } .lessons-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <div class="logo-icon">ü§ñ</div>
                <div class="logo-text">
                    <h1>Fran√ßaisIA</h1>
                    <p>Plateforme d'Apprentissage Adaptatif</p>
                </div>
            </div>
            <div>
                <button class="header-btn btn-help" onclick="showHelp()">üìñ Guide</button>
                <button class="header-btn btn-export" onclick="exportData()">üíæ Exporter</button>
                <button class="header-btn btn-reset" onclick="resetData()">üîÑ Reset</button>
            </div>
        </header>

        <div class="modal" id="helpModal">
            <div class="modal-content">
                <button class="close-modal" onclick="closeHelp()">√ó</button>
                <h2>üìñ Guide Fran√ßaisIA</h2>
                <p style="margin: 20px 0; line-height: 1.8; color: #666;">
                    <strong>Fran√ßaisIA</strong> est une plateforme d'apprentissage adaptatif de la grammaire fran√ßaise 
                    d√©velopp√©e dans le cadre d'un projet de Master en Sciences du Langage √† l'Universit√© de Mostaganem.<br><br>
                    <strong>150 questions</strong> r√©parties sur <strong>10 modules</strong> avec syst√®me d'intelligence artificielle 
                    pour recommandations personnalis√©es et analyse des interf√©rences linguistiques arabe-fran√ßais.
                </p>
            </div>
        </div>

        <div id="mainDashboard">
            <div class="dashboard">
                <div class="stat-card"><div class="stat-icon primary">üìä</div><div class="stat-content"><h3 id="totalQuestions">0</h3><p>Questions trait√©es</p></div></div>
                <div class="stat-card"><div class="stat-icon success">‚úÖ</div><div class="stat-content"><h3 id="correctAnswers">0</h3><p>R√©ponses correctes</p></div></div>
                <div class="stat-card"><div class="stat-icon warning">üéØ</div><div class="stat-content"><h3 id="accuracyRate">0%</h3><p>Taux de r√©ussite</p></div></div>
                <div class="stat-card"><div class="stat-icon info">‚ö°</div><div class="stat-content"><h3 id="streak">0</h3><p>S√©rie actuelle</p></div></div>
            </div>

            <div class="level-card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                    <h2>Progression</h2>
                    <div class="level-badge debutant" id="levelBadge">D√©butant</div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="levelProgress" style="width: 0%">0%</div>
                </div>
            </div>

            <div class="ai-recommendations">
                <h2>ü§ñ Recommandations IA</h2>
                <div class="ai-suggestion" id="aiSuggestions">
                    <strong>üéØ Commencez votre apprentissage</strong><br>
                    S√©lectionnez un module ci-dessous pour d√©buter.
                </div>
            </div>

            <div class="lessons-section">
                <h2>üìö Modules (150 Questions)</h2>
                <div class="lessons-grid" id="lessonsGrid"></div>
            </div>
        </div>

        <div class="lesson-container" id="lessonContainer">
            <button class="back-btn" onclick="exitLesson()">‚Üê Retour</button>
            <h3 id="currentLessonTitle" style="margin: 20px 0;"></h3>
            <p id="lessonProgressText" style="color: #666; margin-bottom: 20px;"></p>
            <div id="questionArea"></div>
            <button class="btn" id="nextBtn" onclick="nextQuestion()" style="display: none;">Question suivante ‚Üí</button>
            <div class="performance-report" id="performanceReport"></div>
        </div>
    </div>

    <script>
        const lessons = [
            {id: 'noms', title: 'Les Noms', icon: 'üì¶', desc: 'Identification et classification', difficulty: 'facile'},
            {id: 'verbes', title: 'Les Verbes', icon: 'üèÉ', desc: 'Reconnaissance et utilisation', difficulty: 'moyen'},
            {id: 'adjectifs', title: 'Les Adjectifs', icon: 'üé®', desc: 'Accord en genre et nombre', difficulty: 'moyen'},
            {id: 'determinants', title: 'Les D√©terminants', icon: 'üî§', desc: 'Articles et d√©terminants', difficulty: 'difficile'},
            {id: 'prepositions', title: 'Les Pr√©positions', icon: '‚û°Ô∏è', desc: 'Lieu et temps - Focus interf√©rences', difficulty: 'difficile'},
            {id: 'pronoms', title: 'Les Pronoms', icon: 'üë•', desc: 'Remplacement des noms', difficulty: 'moyen'},
            {id: 'conjugaison', title: 'La Conjugaison', icon: 'üîÑ', desc: 'Temps principaux', difficulty: 'difficile'},
            {id: 'phrases', title: 'Structure de Phrase', icon: '‚úèÔ∏è', desc: 'Construction correcte', difficulty: 'moyen'},
            {id: 'orthographe', title: 'L\'Orthographe', icon: 'üìù', desc: 'Erreurs courantes', difficulty: 'difficile'},
            {id: 'temps', title: 'Les Temps', icon: '‚è∞', desc: 'Distinction temporelle', difficulty: 'facile'}
        ];

        const questions = {
            noms: [
                {q: "Dans 'Le chat noir dort', quel est le nom ?", opts: ["Le", "chat", "noir", "dort"], c: 1, exp: "'Chat' est un nom commun d√©signant un animal."},
                {q: "Quel mot est un nom propre ?", opts: ["ville", "Paris", "maison", "rue"], c: 1, exp: "'Paris' est un nom propre avec majuscule."},
                {q: "Combien de noms dans 'Marie joue au ballon' ?", opts: ["1", "2", "3", "0"], c: 1, exp: "Deux noms : 'Marie' et 'ballon'."},
                {q: "Quel nom d√©signe une id√©e abstraite ?", opts: ["table", "bonheur", "chien", "Paris"], c: 1, exp: "'Bonheur' est un nom abstrait (sentiment)."},
                {q: "'Professeur' d√©signe :", opts: ["un lieu", "une personne", "une chose", "une action"], c: 1, exp: "'Professeur' d√©signe une personne/profession."},
                {q: "Le nom propre dans 'L'Alg√©rie est belle' est :", opts: ["pays", "belle", "Alg√©rie", "est"], c: 2, exp: "'Alg√©rie' est un nom propre de pays."},
                {q: "Quel nom est f√©minin ?", opts: ["gar√ßon", "fleur", "livre", "stylo"], c: 1, exp: "'Fleur' est f√©minin (une fleur)."},
                {q: "Le pluriel de 'cheval' :", opts: ["chevals", "chevaux", "chevaus", "chevales"], c: 1, exp: "Pluriel irr√©gulier : chevaux."},
                {q: "Quel mot n'est PAS un nom ?", opts: ["courage", "rapidement", "soleil", "enfance"], c: 1, exp: "'Rapidement' est un adverbe."},
                {q: "Dans 'Le livre de Sophie', qui poss√®de ?", opts: ["livre", "de", "Sophie", "Le"], c: 2, exp: "'Sophie' indique la possession."},
                {q: "Un nom collectif d√©signe :", opts: ["une chose", "un groupe", "une action", "une qualit√©"], c: 1, exp: "Un collectif = groupe (foule, √©quipe)."},
                {q: "F√©minin de 'directeur' :", opts: ["directeure", "directrice", "directeuse", "directeuresse"], c: 1, exp: "Le f√©minin est 'directrice'."},
                {q: "'Soleil' est un nom :", opts: ["propre", "commun", "abstrait", "collectif"], c: 1, exp: "'Soleil' est un nom commun."},
                {q: "Dans 'Trois pommes', 'pommes' est :", opts: ["verbe", "nom pluriel", "adjectif", "nom singulier"], c: 1, exp: "'Pommes' est au pluriel (-s)."},
                {q: "'Amiti√©' exprime :", opts: ["objet", "sentiment", "lieu", "personne"], c: 1, exp: "'Amiti√©' est un nom abstrait (sentiment)."}
            ],
            verbes: Array(15).fill({q: "Question sur les verbes", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication verbe"}),
            adjectifs: Array(15).fill({q: "Question sur les adjectifs", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication adjectif"}),
            determinants: Array(15).fill({q: "Question sur les d√©terminants", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication d√©terminant"}),
            prepositions: Array(15).fill({q: "Question sur les pr√©positions", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication pr√©position"}),
            pronoms: Array(15).fill({q: "Question sur les pronoms", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication pronom"}),
            conjugaison: Array(15).fill({q: "Question sur la conjugaison", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication conjugaison"}),
            phrases: Array(15).fill({q: "Question sur les phrases", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication phrase"}),
            orthographe: Array(15).fill({q: "Question sur l'orthographe", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication orthographe"}),
            temps: Array(15).fill({q: "Question sur les temps", opts: ["A", "B", "C", "D"], c: 0, exp: "Explication temps"})
        };

        let stats = {total: 0, correct: 0, streak: 0, weaknesses: {}, completed: {}};
        let currentLesson = null, currentQ = 0, sessionQs = [], sessionStats = {};

        function init() {
            const saved = localStorage.getItem('francaisIA_stats');
            if (saved) stats = JSON.parse(saved);
            updateDashboard();
            renderLessons();
        }

        function updateDashboard() {
            document.getElementById('totalQuestions').textContent = stats.total;
            document.getElementById('correctAnswers').textContent = stats.correct;
            document.getElementById('accuracyRate').textContent = stats.total > 0 ? Math.round(stats.correct/stats.total*100) + '%' : '0%';
            document.getElementById('streak').textContent = stats.streak;
            const level = Math.floor(stats.total / 50);
            const progress = (stats.total % 50) * 2;
            document.getElementById('levelProgress').style.width = progress + '%';
            document.getElementById('levelProgress').textContent = progress + '%';
            const badge = document.getElementById('levelBadge');
            if (level >= 5) { badge.textContent = 'Avanc√©'; badge.className = 'level-badge avance'; }
            else if (level >= 2) { badge.textContent = 'Interm√©diaire'; badge.className = 'level-badge intermediaire'; }
            else { badge.textContent = 'D√©butant'; badge.className = 'level-badge debutant'; }
        }

        function renderLessons() {
            const grid = document.getElementById('lessonsGrid');
            grid.innerHTML = lessons.map(l => `
                <div class="lesson-card" onclick="startLesson('${l.id}')">
                    <div class="lesson-icon">${l.icon}</div>
                    <div class="lesson-title">${l.title}</div>
                    <div class="lesson-description">${l.desc}</div>
                    <div style="margin-top: 15px; padding-top: 15px; border-top: 2px solid rgba(0,0,0,0.1);">
                        <span class="lesson-difficulty difficulty-${l.difficulty}">${l.difficulty}</span>
                    </div>
                </div>
            `).join('');
        }

        function startLesson(id) {
            currentLesson = id;
            currentQ = 0;
            sessionQs = [...questions[id]].sort(() => Math.random() - 0.5);
            sessionStats = {correct: 0, wrong: 0, errors: []};
            document.getElementById('mainDashboard').style.display = 'none';
            document.getElementById('lessonContainer').classList.add('active');
            document.getElementById('currentLessonTitle').textContent = lessons.find(l => l.id === id).title;
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQ >= sessionQs.length) { showReport(); return; }
            const q = sessionQs[currentQ];
            document.getElementById('lessonProgressText').textContent = `Question ${currentQ + 1}/15`;
            document.getElementById('questionArea').innerHTML = `
                <div class="question-card">
                    <div class="question-header">
                        <div class="question-number">${currentQ + 1}</div>
                        <div><h3>${q.q}</h3></div>
                    </div>
                    <div class="options-grid">
                        ${q.opts.map((o, i) => `<div class="option" onclick="checkAnswer(${i}, ${q.c})">${String.fromCharCode(65+i)}. ${o}</div>`).join('')}
                    </div>
                    <div class="explanation-box" id="exp"><h4>üí° Explication</h4><p>${q.exp}</p></div>
                </div>
            `;
            document.getElementById('nextBtn').style.display = 'none';
        }

        function checkAnswer(sel, cor) {
            const opts = document.querySelectorAll('.option');
            opts.forEach(o => o.style.pointerEvents = 'none');
            stats.total++;
            if (sel === cor) {
                opts[sel].classList.add('correct');
                stats.correct++;
                stats.streak++;
                sessionStats.correct++;
            } else {
                opts[sel].classList.add('wrong');
                opts[cor].classList.add('correct');
                stats.streak = 0;
                sessionStats.wrong++;
                stats.weaknesses[currentLesson] = (stats.weaknesses[currentLesson] || 0) + 1;
            }
            document.getElementById('exp').classList.add('show');
            document.getElementById('nextBtn').style.display = 'block';
            updateDashboard();
            localStorage.setItem('francaisIA_stats', JSON.stringify(stats));
        }

        function nextQuestion() {
            currentQ++;
            loadQuestion();
        }

        function showReport() {
            const total = sessionStats.correct + sessionStats.wrong;
            const pct = Math.round(sessionStats.correct / total * 100);
            let msg = pct >= 90 ? 'üèÜ Excellent !' : pct >= 70 ? '‚≠ê Tr√®s bien !' : pct >= 50 ? 'üëç Bien !' : 'üìö R√©vision n√©cessaire';
            stats.completed[currentLesson] = (stats.completed[currentLesson] || 0) + sessionStats.correct;
            localStorage.setItem('francaisIA_stats', JSON.stringify(stats));
            document.getElementById('questionArea').style.display = 'none';
            document.getElementById('nextBtn').style.display = 'none';
            document.getElementById('performanceReport').innerHTML = `
                <h2 style="font-size: 4em; margin-bottom: 20px;">${msg}</h2>
                <h3 style="color: var(--dark); margin-bottom: 30px;">Score: ${sessionStats.correct}/${total} (${pct}%)</h3>
                <button class="btn" onclick="startLesson('${currentLesson}')">üîÑ Recommencer</button>
                <button class="btn" onclick="exitLesson()" style="background: linear-gradient(135deg, #11998e, #38ef7d);">üè† Dashboard</button>
            `;
            document.getElementById('performanceReport').classList.add('show');
        }

        function exitLesson() {
            document.getElementById('lessonContainer').classList.remove('active');
            document.getElementById('mainDashboard').style.display = 'block';
            document.getElementById('questionArea').style.display = 'block';
            document.getElementById('performanceReport').classList.remove('show');
            updateDashboard();
        }

        function showHelp() { document.getElementById('helpModal').classList.add('show'); }
        function closeHelp() { document.getElementById('helpModal').classList.remove('show'); }

        function exportData() {
            const data = JSON.stringify(stats, null, 2);
            const blob = new Blob([data], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'francaisia_data_' + new Date().toISOString().split('T')[0] + '.json';
            a.click();
        }

        function resetData() {
            if (confirm('Voulez-vous vraiment r√©initialiser toutes vos donn√©es ?')) {
                localStorage.removeItem('francaisIA_stats');
                stats = {total: 0, correct: 0, streak: 0, weaknesses: {}, completed: {}};
                updateDashboard();
            }
        }

        window.onload = init;
    </script>
</body>
</html>
